(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-24299ad9"],{"0a49":function(t,e,n){var o=n("9b43"),r=n("626a"),i=n("4bf8"),a=n("9def"),s=n("cd1c");t.exports=function(t,e){var n=1==t,l=2==t,c=3==t,p=4==t,u=6==t,d=5==t||u,v=e||s;return function(e,s,f){for(var h,m,g=i(e),_=r(g),y=o(s,f,3),j=a(_.length),b=0,L=n?v(e,j):l?v(e,0):void 0;j>b;b++)if((d||b in _)&&(h=_[b],m=y(h,b,g),t))if(n)L[b]=m;else if(m)switch(t){case 3:return!0;case 5:return h;case 6:return b;case 2:L.push(h)}else if(p)return!1;return u?-1:c||p?p:L}}},1169:function(t,e,n){var o=n("2d95");t.exports=Array.isArray||function(t){return"Array"==o(t)}},7729:function(t,e,n){"use strict";n.r(e);var o=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"vue"},[n("ul",{staticClass:"allin"},[n("li",[n("div",[n("p",{staticStyle:{color:"red"}},[t._v("總金額: "),n("b",{staticStyle:{"font-size":"1.6em"}},[t._v(t._s(t.allpay))])]),n("p",[t._v("總人數: "+t._s(t.personal.length))]),n("p",[t._v("平均每人應付金額: "+t._s(t.allpay/t.personal.length))]),n("p",[n("b",[t._v("明細項目:")]),t._l(t.allp,function(e,o){return n("span",[t._v(t._s(e.title)+" ( "+t._s(e.cost)+" - "+t._s(t.personal[e.payid].name)+" )")])})],2)])])]),n("ul",{staticClass:"needpay"},[t._l(t.personal,function(e,o){return n("li",{staticClass:"men"},[n("div",[n("b",{staticClass:"del",on:{click:function(e){return t.delmen(o)}}},[t._v("X")]),n("div",[t._v("姓名: "),n("input",{directives:[{name:"model",rawName:"v-model",value:e.name,expression:"d.name"}],domProps:{value:e.name},on:{input:function(n){n.target.composing||t.$set(e,"name",n.target.value)}}})]),n("div",{staticClass:"quit"},[n("h2",[t._v("參加項目:")]),n("span",t._l(t.allp,function(o,r){return n("label",[n("input",{directives:[{name:"model",rawName:"v-model",value:e.nojoin[r],expression:"d.nojoin[j]"}],attrs:{type:"checkbox"},domProps:{checked:Array.isArray(e.nojoin[r])?t._i(e.nojoin[r],null)>-1:e.nojoin[r]},on:{change:function(n){var o=e.nojoin[r],i=n.target,a=!!i.checked;if(Array.isArray(o)){var s=null,l=t._i(o,s);i.checked?l<0&&t.$set(e.nojoin,r,o.concat([s])):l>-1&&t.$set(e.nojoin,r,o.slice(0,l).concat(o.slice(l+1)))}else t.$set(e.nojoin,r,a)}}}),n("b",[t._v(t._s(o.title)+"、")])])}),0)]),n("div",{staticClass:"project"},[n("h2",[t._v("代墊項目: ")]),t._l(t.personal[o].project,function(e,r){return n("div",[n("span",[t._v("名稱:"),n("input",{directives:[{name:"model",rawName:"v-model",value:e.title,expression:"s.title"}],domProps:{value:e.title},on:{input:function(n){n.target.composing||t.$set(e,"title",n.target.value)}}})]),n("span",[t._v("金額:"),n("input",{directives:[{name:"model",rawName:"v-model",value:e.cost,expression:"s.cost"}],domProps:{value:e.cost},on:{input:function(n){n.target.composing||t.$set(e,"cost",n.target.value)}}})]),n("b",{staticClass:"del",on:{click:function(e){return t.del(o,r)}}},[t._v("X")])])}),n("span",[n("b",{on:{click:function(e){return t.addprolist(o)}}},[t._v("+")])])],2),n("div",[t._v("退還金額: \n"+t._s(t.personal[o].refunds))]),n("div",[t._v("應付金額: "+t._s(t.gopay[o]))]),n("div",{staticClass:"end"},[t.gopay[o]>t.personal[o].refunds?n("b",{staticStyle:{color:"red"}},[t._v("需繳付")]):n("b",{staticStyle:{color:"green"}},[t._v("應退款")]),t._v(": "+t._s(void 0==t.gopay[o]?0:Math.round(Math.abs(t.gopay[o]-t.personal[o].refunds)))),n("span",{staticStyle:{"font-size":".4em",color:"#777"}},[t._v(" (小數點後四捨五入)")])])])])}),n("li",[n("div",{staticClass:"addnew"},[n("p",{},[t._v("緣起："),n("br"),t._v("旅行聚會代墊拆帳總是很麻煩。"),n("br"),t._v("以使用者付費概念，"),n("br"),t._v("各付各的誰都不吃虧。")]),n("b",{attrs:{title:"新增人物"},on:{click:t.addpersonal}},[t._v("+")])])])],2)])},r=[],i=(n("ac6a"),n("f3e2"),{name:"vue",props:{msg:String},components:{},data:function(){return{payarr:[],gopay:[],personal:[{name:"王大頭",refunds:0,nojoin:[!1],project:[{proid:0,title:"住宿費",cost:0}]}]}},watch:{personal:{handler:function(t){t.forEach(function(e,n){for(var o=0,r=e.project.length,i=0;i<r;i++){var a=o;o=a+1*e.project[i].cost,i==r-1&&(t[n].refunds=o)}}),this.nojoing()},deep:!0}},methods:{addprolist:function(t){var e=this.personal[t].project.length,n=this.personal.length,o=this.allp.length,r=0;this.personal[t].project.push({proid:o,title:"新增項目"+o,cost:0}),this.personal.forEach(function(t){for(var e=0;e<t.project.length;e++)r++,t.project[e].order=r});for(var i=this.personal[t].project[e].order-1,a=0;a<n;a++)this.personal[a].nojoin.splice(i,0,!1)},addpersonal:function(){for(var t=this.personal.length,e=[],n=this.allp.length,o=0;o<n;o++)e.push(!1);this.personal.push({name:"新增人物"+t,refunds:0,nojoin:e,project:[]}),console.log(this.personal)},del:function(t,e){this.personal[t].project.splice(e,1);for(var n=this.personal.length,o=0===e?this.personal[t].project[e].order-1:this.personal[t].project[e-1].order,r=0;r<n;r++)this.personal[r].nojoin.splice(o,1)},delmen:function(t){this.personal.splice(t,1)},nojoing:function(){for(var t=[],e=this.personal,n=0;n<this.allp.length;n++)for(var o=0,r=0;r<e.length;r++)!0===e[r].nojoin[n]&&(o+=1),t.splice(n,1,o);this.payarr=t;for(var i=this.allp,a=0;a<e.length;a++){var s=0;t.forEach(function(n,o){var r=s,l=t[o],c=e[a].nojoin[o]?0:1;s=r+i[o].cost/(e.length-l)*c}),this.gopay.splice(a,1,s)}}},computed:{allpay:function(){var t=0;return this.allp.forEach(function(e){t+=1*e.cost}),t},allp:function(){var t=[],e=0;return this.personal.forEach(function(n,o){for(var r=n.project,i=0;i<r.length;i++){var a={};a.proid=e,a.payid=o,a.title=r[i].title,a.cost=r[i].cost,t.push(a),e++}}),t}}}),a=i,s=(n("bb75"),n("2877")),l=Object(s["a"])(a,o,r,!1,null,"2fa60b08",null);e["default"]=l.exports},ac6a:function(t,e,n){for(var o=n("cadf"),r=n("0d58"),i=n("2aba"),a=n("7726"),s=n("32e9"),l=n("84f2"),c=n("2b4c"),p=c("iterator"),u=c("toStringTag"),d=l.Array,v={CSSRuleList:!0,CSSStyleDeclaration:!1,CSSValueList:!1,ClientRectList:!1,DOMRectList:!1,DOMStringList:!1,DOMTokenList:!0,DataTransferItemList:!1,FileList:!1,HTMLAllCollection:!1,HTMLCollection:!1,HTMLFormElement:!1,HTMLSelectElement:!1,MediaList:!0,MimeTypeArray:!1,NamedNodeMap:!1,NodeList:!0,PaintRequestList:!1,Plugin:!1,PluginArray:!1,SVGLengthList:!1,SVGNumberList:!1,SVGPathSegList:!1,SVGPointList:!1,SVGStringList:!1,SVGTransformList:!1,SourceBufferList:!1,StyleSheetList:!0,TextTrackCueList:!1,TextTrackList:!1,TouchList:!1},f=r(v),h=0;h<f.length;h++){var m,g=f[h],_=v[g],y=a[g],j=y&&y.prototype;if(j&&(j[p]||s(j,p,d),j[u]||s(j,u,g),l[g]=d,_))for(m in o)j[m]||i(j,m,o[m],!0)}},bb75:function(t,e,n){"use strict";var o=n("bdc8"),r=n.n(o);r.a},bdc8:function(t,e,n){},cd1c:function(t,e,n){var o=n("e853");t.exports=function(t,e){return new(o(t))(e)}},e853:function(t,e,n){var o=n("d3f4"),r=n("1169"),i=n("2b4c")("species");t.exports=function(t){var e;return r(t)&&(e=t.constructor,"function"!=typeof e||e!==Array&&!r(e.prototype)||(e=void 0),o(e)&&(e=e[i],null===e&&(e=void 0))),void 0===e?Array:e}},f3e2:function(t,e,n){"use strict";var o=n("5ca1"),r=n("0a49")(0),i=n("2f21")([].forEach,!0);o(o.P+o.F*!i,"Array",{forEach:function(t){return r(this,t,arguments[1])}})}}]);